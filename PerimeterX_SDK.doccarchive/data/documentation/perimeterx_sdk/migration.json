{"abstract":[{"text":"In this article we will explore how to upgrade the Perimeter X iOS SDK from an earlier version (1.x and below) to version 2.0.","type":"text"}],"primaryContentSections":[{"content":[{"anchor":"Overview","level":3,"text":"Overview","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"The PerimeterX iOS SDK v2.0 includes a complete new set of APIs. The current integration implemented in your code with an earlier SDK version will have to be replaced as following.","type":"text"}]},{"type":"heading","level":3,"anchor":"Start-the-SDK","text":"Start the SDK"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In version 1.x, the "},{"type":"codeVoice","code":"start"},{"text":" function is called with 2 parameters: ","type":"text"},{"type":"codeVoice","code":"AppId"},{"text":" and ","type":"text"},{"type":"codeVoice","code":"enableDoctorCheck"},{"text":" (the later was added in 1.16.0).","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"In version 2.0, the ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)"},{"text":" function has additional parameters:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"delegate"},{"text":" (","type":"text"},{"code":"PerimeterXDelegate","type":"codeVoice"},{"type":"text","text":") to handle the SDK’s events."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"completion handler","type":"codeVoice"},{"text":" to handle the result of the start process.","type":"text"}]}]}]},{"inlineContent":[{"type":"text","text":"Notice that the new Interceptor will be enabled in 2.0. This has effect on the integration with the SDK, which is described in this document."}],"type":"paragraph"},{"anchor":"Set-custom-parameters","level":3,"text":"Set custom parameters","type":"heading"},{"inlineContent":[{"type":"text","text":"In version 1.x, the set custom parameters function is called with the dictionary parameter only."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In version 2.0, the "},{"type":"reference","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/setCustomParameters(parameters:forAppId:completion:)","isActive":true},{"text":" function has another optional param: the AppID. This is required only when using multiple AppIDs.","type":"text"}]},{"text":"Get VID","level":3,"anchor":"Get-VID","type":"heading"},{"inlineContent":[{"text":"In version 1.x, the get VID function is called without any parameters.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"In version 2.0, the ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/vid(forAppId:)","isActive":true},{"text":" function has another optional param: the AppID. This is required only when using multiple AppIDs.","type":"text"}]},{"level":3,"text":"Get HTTP headers","anchor":"Get-HTTP-headers","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In version 1.x, the get HTTP headers function is called without any parameters."}]},{"type":"paragraph","inlineContent":[{"text":"In version 2.0, the ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/headersForURLRequest(forAppId:)"},{"type":"text","text":" function has another optional param: the AppID. This is required only when using multiple AppIDs. Please note that now this function should NOT be used when the interceptor is enabled."}]},{"level":3,"text":"Check error and handle response","type":"heading","anchor":"Check-error-and-handle-response"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In version 1.x, a function is called to get the PX’s error response from the request’s response which called another function to handle the PX’s error response."}]},{"inlineContent":[{"text":"In version 2.0 the flow is much easier:","type":"text"}],"type":"paragraph"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"If the interceptor is enabled, simply check whether the request was blocked with the ","type":"text"},{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/isRequestBlockedError(error:)","type":"reference","isActive":true},{"type":"text","text":" function."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"If the interceptor is disabled, use the PerimeterX SDK to handle the response with the ","type":"text"},{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/handleResponse(forAppId:data:response:)","type":"reference","isActive":true},{"type":"text","text":" function. If it was a blocked response, the SDK will handle it and the function will return "},{"code":"true","type":"codeVoice"},{"text":".","type":"text"}]}]}]},{"level":3,"anchor":"Other-functions","text":"Other functions","type":"heading"},{"inlineContent":[{"text":"All other functions in 1.x were removed from the SDK’s API. You can learn more about the integration with those articles:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/IntegrationGuide","isActive":true},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/BeyondTheBasic","isActive":true,"type":"reference"},{"text":".","type":"text"}],"type":"paragraph"}]}],"type":"orderedList"}],"kind":"content"}],"metadata":{"role":"article","modules":[{"name":"PerimeterX_SDK"}],"roleHeading":"Article","title":"Migration from earlier SDK versions"},"hierarchy":{"paths":[["doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/perimeterx_sdk\/migration"]},{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/perimeterx_sdk\/migration"]}],"schemaVersion":{"minor":3,"major":0,"patch":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/Migration"},"sections":[],"kind":"article","references":{"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterXErrorCode/requestWasBlocked":{"title":"PerimeterXErrorCode.requestWasBlocked","abstract":[],"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterXErrorCode\/requestWasBlocked","fragments":[{"text":"case","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"requestWasBlocked"}],"url":"\/documentation\/perimeterx_sdk\/perimeterxerrorcode\/requestwasblocked","kind":"symbol","type":"topic","role":"symbol"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/IntegrationGuide":{"title":"Integration Guide","url":"\/documentation\/perimeterx_sdk\/integrationguide","role":"article","abstract":[{"type":"text","text":"This document provides instructions to how to integrate Perimeter X iOS SDK v2.0 into your project."}],"kind":"article","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/IntegrationGuide","type":"topic"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/isRequestBlockedError(error:)":{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/isRequestBlockedError(error:)","role":"symbol","title":"isRequestBlockedError(error:)","kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"isRequestBlockedError","kind":"identifier"},{"text":"(","kind":"text"},{"text":"error","kind":"externalParam"},{"kind":"text","text":": "},{"preciseIdentifier":"s:s5ErrorP","text":"Error","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"}],"type":"topic","abstract":[{"type":"text","text":"Returns true if the error is "},{"isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterXErrorCode\/requestWasBlocked","type":"reference"},{"type":"text","text":" error."}],"url":"\/documentation\/perimeterx_sdk\/perimeterx\/isrequestblockederror(error:)","navigatorTitle":[{"text":"isRequestBlockedErrorWithError:","kind":"identifier"}]},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/vid(forAppId:)":{"fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"vid"},{"text":"(","kind":"text"},{"text":"forAppId","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":"?) -> ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":"?","kind":"text"}],"abstract":[{"text":"Get the VID for given AppID.","type":"text"}],"type":"topic","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/vid(forAppId:)","navigatorTitle":[{"kind":"identifier","text":"vidForAppId:"}],"url":"\/documentation\/perimeterx_sdk\/perimeterx\/vid(forappid:)","role":"symbol","kind":"symbol","title":"vid(forAppId:)"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK":{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK","role":"collection","kind":"symbol","url":"\/documentation\/perimeterx_sdk","title":"PerimeterX_SDK","type":"topic","abstract":[{"type":"image","identifier":"PerimeterX.png"}]},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/setCustomParameters(parameters:forAppId:completion:)":{"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/setCustomParameters(parameters:forAppId:completion:)","role":"symbol","title":"setCustomParameters(parameters:forAppId:completion:)","kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"setCustomParameters","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"externalParam","text":"parameters"},{"text":": [","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":" : ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":"], "},{"text":"forAppId","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"completion"},{"text":": (() -> ())?)","kind":"text"}],"abstract":[{"text":"Set custom parameters for given AppID.","type":"text"}],"type":"topic","url":"\/documentation\/perimeterx_sdk\/perimeterx\/setcustomparameters(parameters:forappid:completion:)","navigatorTitle":[{"text":"setCustomParametersWithParameters:forAppId:completion:","kind":"identifier"}]},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/start(appId:delegate:enableDoctorCheck:completion:)":{"kind":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"start","kind":"identifier"},{"kind":"text","text":"("},{"text":"appId","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"text":", ","kind":"text"},{"text":"delegate","kind":"externalParam"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:@M@PerimeterX_SDK@objc(pl)PerimeterXDelegate","text":"PerimeterXDelegate"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"enableDoctorCheck"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": ("},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Error","kind":"typeIdentifier","preciseIdentifier":"s:s5ErrorP"},{"kind":"text","text":"?) -> ())"}],"title":"start(appId:delegate:enableDoctorCheck:completion:)","abstract":[{"type":"text","text":"Start the PerimeterX SDK."}],"url":"\/documentation\/perimeterx_sdk\/perimeterx\/start(appid:delegate:enabledoctorcheck:completion:)","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)","navigatorTitle":[{"kind":"identifier","text":"startWithAppId:delegate:enableDoctorCheck:completion:"}],"role":"symbol"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/handleResponse(forAppId:data:response:)":{"title":"handleResponse(forAppId:data:response:)","abstract":[{"text":"This function handles the URL request’s response and presents the block screen, if necessary.","type":"text"}],"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/handleResponse(forAppId:data:response:)","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"text":"handleResponse","kind":"identifier"},{"text":"(","kind":"text"},{"text":"forAppId","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"data"},{"text":": ","kind":"text"},{"text":"Data","kind":"typeIdentifier","preciseIdentifier":"s:10Foundation4DataV"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"response"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSURLResponse","text":"URLResponse"},{"kind":"text","text":") -> "},{"preciseIdentifier":"s:Sb","text":"Bool","kind":"typeIdentifier"}],"url":"\/documentation\/perimeterx_sdk\/perimeterx\/handleresponse(forappid:data:response:)","kind":"symbol","navigatorTitle":[{"text":"handleResponseForAppId:data:response:","kind":"identifier"}],"type":"topic","role":"symbol"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/BeyondTheBasic":{"role":"article","type":"topic","title":"Beyond the Basic","url":"\/documentation\/perimeterx_sdk\/beyondthebasic","abstract":[{"type":"text","text":"In this article we will explore more advanced topics that will help you to get the most out of the SDK."}],"kind":"article","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/BeyondTheBasic"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/headersForURLRequest(forAppId:)":{"title":"headersForURLRequest(forAppId:)","url":"\/documentation\/perimeterx_sdk\/perimeterx\/headersforurlrequest(forappid:)","type":"topic","identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/headersForURLRequest(forAppId:)","abstract":[{"type":"text","text":"Returns HTTP headers that should be added to the URL request."}],"role":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"headersForURLRequest","kind":"identifier"},{"text":"(","kind":"text"},{"text":"forAppId","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"kind":"text","text":"?) -> ["},{"preciseIdentifier":"s:SS","kind":"typeIdentifier","text":"String"},{"text":" : ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"text":"]","kind":"text"}],"kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"headersForURLRequestForAppId:"}]}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"op":"replace","path":"\/identifier\/interfaceLanguage","value":"occ"},{"op":"add","path":"\/topicSections","value":null},{"path":"\/seeAlsoSections","op":"add","value":null},{"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1isRequestBlockedError(error:)\/title","value":"isRequestBlockedErrorWithError:"},{"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1isRequestBlockedError(error:)\/fragments","value":[{"text":"+ ","kind":"text"},{"kind":"identifier","text":"isRequestBlockedErrorWithError:"}]},{"op":"replace","value":"vidForAppId:","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1vid(forAppId:)\/title"},{"value":[{"text":"+ ","kind":"text"},{"text":"vidForAppId:","kind":"identifier"}],"path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1vid(forAppId:)\/fragments","op":"replace"},{"op":"replace","value":"setCustomParametersWithParameters:forAppId:completion:","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1setCustomParameters(parameters:forAppId:completion:)\/title"},{"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1setCustomParameters(parameters:forAppId:completion:)\/fragments","value":[{"text":"+ ","kind":"text"},{"text":"setCustomParametersWithParameters:forAppId:completion:","kind":"identifier"}]},{"value":"startWithAppId:delegate:enableDoctorCheck:completion:","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1start(appId:delegate:enableDoctorCheck:completion:)\/title","op":"replace"},{"path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1start(appId:delegate:enableDoctorCheck:completion:)\/fragments","op":"replace","value":[{"kind":"text","text":"+ "},{"text":"startWithAppId:delegate:enableDoctorCheck:completion:","kind":"identifier"}]},{"value":"handleResponseForAppId:data:response:","op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1handleResponse(forAppId:data:response:)\/title"},{"value":[{"kind":"text","text":"+ "},{"text":"handleResponseForAppId:data:response:","kind":"identifier"}],"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1handleResponse(forAppId:data:response:)\/fragments"},{"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1headersForURLRequest(forAppId:)\/title","value":"headersForURLRequestForAppId:"},{"op":"replace","path":"\/references\/doc:~1~1com.perimeterx.mobile-sdk~1documentation~1PerimeterX_SDK~1PerimeterX~1headersForURLRequest(forAppId:)\/fragments","value":[{"text":"+ ","kind":"text"},{"text":"headersForURLRequestForAppId:","kind":"identifier"}]}]}]}