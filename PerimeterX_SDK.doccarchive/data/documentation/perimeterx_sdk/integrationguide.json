{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Supported-versions","level":2,"type":"heading","text":"Supported versions"},{"type":"paragraph","inlineContent":[{"type":"text","text":"PerimeterX supports Xcode 13 and higher."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"PerimeterX supports iOS 11 and higher."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"PerimeterX supports Swift 5.5 and higher."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"PerimeterX supports Objective-C."}]},{"anchor":"Introduction","level":2,"type":"heading","text":"Introduction"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The PerimeterX iOS SDK works by constantly profiling and evaluating device behavior to ensure that the connections to your mobile APIs and services are genuine."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This process is complex and detailed yet only requires initialization to manage a set of secure HTTP headers which are added to all HTTP and HTTPS requests made by the mobile application to the origin server. These HTTP headers are refreshed on a regular basis by the SDK as it is profiling the end-user‚Äôs mobile device."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The PerimeterX iOS SDK works well with popular HTTP request libraries for iOS including "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/Alamofire\/Alamofire"},{"type":"text","text":"."}]},{"anchor":"Prerequisites","level":2,"type":"heading","text":"Prerequisites"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The following are required to install the PerimeterX iOS SDK:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Administrative access to the PerimeterX Portal to:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Retrieve the PerimeterX application ID (AppID)."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Set the token expiration and validity."}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"An active PerimeterX Enforcer."}]}]}]},{"anchor":"Integration","level":2,"type":"heading","text":"Integration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Adding PerimeterX SDK to your project with:"}]},{"anchor":"Swift-Package-Manager","level":3,"type":"heading","text":"Swift Package Manager"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Add the package from the following repository:"}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework"}]},{"anchor":"CocoaPods","level":3,"type":"heading","text":"CocoaPods"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Add the PerimeterX pod to your "},{"type":"reference","isActive":true,"identifier":"https:\/\/guides.cocoapods.org\/"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":null,"code":["platform :ios, '13.0'","use_frameworks!","","target '<Your App Name>' do","    pod 'PerimeterX', '<Version>'","end"]},{"anchor":"Manual","level":3,"type":"heading","text":"Manual"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Download PerimeterX_SDK.xcframework from "},{"overridingTitleInlineContent":[{"type":"text","text":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework"}],"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework","overridingTitle":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In Xcode, add the framework to the ‚ÄúFrameworks and Libraries‚Äù section in your target."}]}]}]},{"anchor":"Implementation","level":2,"type":"heading","text":"Implementation"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In your "},{"type":"codeVoice","code":"AppDelegate"},{"type":"text","text":":"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Import the SDK."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["import PerimeterX_SDK"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["@import PerimeterX_SDK;"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Make the "},{"type":"codeVoice","code":"AppDelegate"},{"type":"text","text":" class to conform to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterXDelegate"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["class AppDelegate: UIResponder, UIApplicationDelegate, PerimeterXDelegate"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["@interface AppDelegate : UIResponder <UIApplicationDelegate, PerimeterXDelegate>"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Verify the SDK‚Äôs version."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["print(\"SDK version: \\(PerimeterX.sdkVersion())\")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["NSLog(@\"SDK version: %@\", [PerimeterX sdkVersion]);"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)"},{"type":"text","text":" function with your AppID in the "},{"type":"codeVoice","code":"UIApplicationDelegate"},{"type":"text","text":"‚Äòs "},{"type":"codeVoice","code":"didFinishLaunchingWithOptions"},{"type":"text","text":" function. This function sets up the session for a given AppID. When the process ends, and the completion handler is called with "},{"type":"codeVoice","code":"success"},{"type":"text","text":" as "},{"type":"codeVoice","code":"true"},{"type":"text","text":", the SDK will have an updated token from PerimeterX backend. However, while this function is working in the background, the SDK will still provide the required headers (for example, a token from a previous session if exists). It‚Äôs essential to call this function as early as possible in your application and before any URL request to your server."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["PerimeterX.start(appId: \"<APP_ID>\", delegate: self, enableDoctorCheck: false) { success, error in","    if success {","        if let vid = PerimeterX.vid(forAppId: nil) {","            print(\"vid: \\(vid)\")","        }","    }","    else {","        if let error = error {","            print(\"error: \\(error)\")","        }","        ","        \/\/ make sure to start the sdk again when it fails (network issue, etc.)","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["[PerimeterX startWithAppId:@\"<APP_ID>\" delegate:self enableDoctorCheck:NO completion:^(BOOL success, NSError * _Nullable error) {","    if (success) {","        NSString *vid = [PerimeterX vidForAppId:nil];","        NSLog(@\"vid: %@\", vid);","    }","    else {","        NSLog(@\"error: %@\", error);","        ","        \/\/ make sure to start the sdk again when it fails (network issue, etc.)","    }","}];"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"That‚Äôs it! üéâ You can follow this "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/PerimeterX\/px-mobile-sdk-demo-app"},{"type":"text","text":" and download our demo app in order to see an example of integrating the SDK in an iOS app."}]}]}]},{"anchor":"Disable-automatic-interception","level":2,"type":"heading","text":"Disable automatic interception"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The SDK automatically intercepts HTTP requests and adds relevant HTTP headers. However, you can disable this and add those HTTP headers manually."}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"After calling the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)"},{"type":"text","text":" function, disable the automatic interception in the policy. In order that the new policy will be taken into affect, you must call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)"},{"type":"text","text":" function before setting the new policy. It‚Äôs recommended to set the policy right after calling the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)"},{"type":"text","text":" function to avoid unexpected behaviour. You don‚Äôt have to wait until the completion handler of the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)"},{"type":"text","text":" function is called, before you set the policy."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["let policy = PXPolicy()","policy.requestsInterceptedAutomaticallyEnabled = false","PerimeterX.setPolicy(policy: policy, forAppId: nil, completion: nil)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["PXPolicy *policy = [[PXPolicy alloc] init];","policy.requestsInterceptedAutomaticallyEnabled = NO;","[PerimeterX setPolicyWithPolicy:policy forAppId:nil completion:nil];"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Before sending your URL request, take HTTP headers from the SDK and add them to your request. The SDK should always return headers. When no headers are returned, it means that something went wrong with the SDK integration."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["let headers = PerimeterX.headersForURLRequest(forAppId: nil)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["NSDictionary<NSString *, NSString *> *headers = [PerimeterX headersForURLRequestForAppId:nil];"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"After receiving an error in the response, pass the information to SDK."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["let isHandledByPX = PerimeterX.handleResponse(forAppId: nil, data: data, response: response)","if isHandledByPX {","    print(\"block response was handled by PX\")","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["BOOL isHandledByPX = [PerimeterX handleResponseForAppId:nil data:data response:response];","if (isHandledByPX) {","    NSLog(@\"block response was handled by PX\");","}"]}]}]},{"anchor":"Enable-Account-Defender","level":2,"type":"heading","text":"Enable Account Defender"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to enable Account Defender, a user ID should be set. You can set it by calling the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/setUserId(userId:forAppId:)"},{"type":"text","text":" function."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["PerimeterX.setUserId(userId: \"<the current user ID>\", forAppId: nil)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["[PerimeterX setUserIdWithUserId:@\"<the current user ID>\" forAppId:nil];"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When the current user logout, you should call this function again with "},{"type":"codeVoice","code":"nil"},{"type":"text","text":". This will turn off the Account Defender."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to tell Account Defender about the user‚Äôs flow, you should call this function for each URL request that been send to your server. Notice that when the interceptor is enabled, this is done automatically by the SDK and you don‚Äôt need to call this function."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Swift:"}]},{"type":"codeListing","syntax":"swift","code":["PerimeterX.registerOutgoingUrlRequest(url: \"<URL>\", forAppId: nil)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["[PerimeterX registerOutgoingUrlRequestWithUrl:@\"<URL>\" forAppId:nil];"]},{"anchor":"Integration-with-React-Native","level":2,"type":"heading","text":"Integration with React Native"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The Perimeter X iOS SDK can be integrated into React Native projects."}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add the SDK to your Android project as described above."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The automatic interceptor is not supported in React Native, so any request from the JavaScript code has to be handled manually."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Disable the automatic interception as described above."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a native module as described "},{"type":"reference","isActive":true,"identifier":"https:\/\/reactnative.dev\/docs\/native-modules-ios"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a function that pass the HTTP headers from the PerimeterX SDK to the JavaScript code. Here is an example:"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["RCT_EXPORT_METHOD(getHTTPHeaders:(RCTResponseSenderBlock)callback) {","    NSDictionary<NSString *, NSString *> *headers = [PerimeterX headersForURLRequestForAppId:nil];","    NSData *data = [NSJSONSerialization dataWithJSONObject:headers options:0 error:nil];","    NSString *json = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];","    callback(@[json]);","}"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In your JavaScript code, send your request with those HTTP headers. Here is an example:"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"JavaScript:"}]},{"type":"codeListing","syntax":"javascript","code":["PerimeterXModule.getHTTPHeaders(async headers => {  ","    const obj = JSON.parse(headers);  ","    const url = 'https:\/\/my.request.com'","    const response = await fetch(url, {  ","        method: 'GET',  ","        headers: obj,  ","    });  ","});"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Next, pass the response back to the native module. Here is an example:"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Objective-C:"}]},{"type":"codeListing","syntax":"objectivec","code":["RCT_EXPORT_METHOD(handleResponse:(NSString *)response code:(NSInteger)code url:(NSString *)url) {","    NSData *data = [response dataUsingEncoding:NSUTF8StringEncoding];","    NSHTTPURLResponse *httpURLResponse = [[NSHTTPURLResponse alloc] initWithURL:[NSURL URLWithString:url] statusCode:code HTTPVersion:nil headerFields:nil];","    [PerimeterX handleResponseForAppId:nil data:data response:httpURLResponse];","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"JavaScript:"}]},{"type":"codeListing","syntax":"javascript","code":["const json = await response.json();  ","PerimeterXModule.handleResponse(JSON.stringify(json), response.status, url);"]}]}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/perimeterx_sdk\/integrationguide"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/IntegrationGuide","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"This document provides instructions to how to integrate Perimeter X iOS SDK v2.0 into your project."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Integration Guide","role":"article","modules":[{"name":"PerimeterX_SDK"}]},"hierarchy":{"paths":[["doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK"]]},"references":{"https://reactnative.dev/docs/native-modules-ios":{"title":"here","titleInlineContent":[{"type":"text","text":"here"}],"type":"link","identifier":"https:\/\/reactnative.dev\/docs\/native-modules-ios","url":"https:\/\/reactnative.dev\/docs\/native-modules-ios"},"https://github.com/Alamofire/Alamofire":{"title":"Alamofire","titleInlineContent":[{"type":"text","text":"Alamofire"}],"type":"link","identifier":"https:\/\/github.com\/Alamofire\/Alamofire","url":"https:\/\/github.com\/Alamofire\/Alamofire"},"https://github.com/PerimeterX/px-mobile-sdk-demo-app":{"title":"link","titleInlineContent":[{"type":"text","text":"link"}],"type":"link","identifier":"https:\/\/github.com\/PerimeterX\/px-mobile-sdk-demo-app","url":"https:\/\/github.com\/PerimeterX\/px-mobile-sdk-demo-app"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterXDelegate":{"role":"symbol","title":"PerimeterXDelegate","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"PerimeterXDelegate"}],"abstract":[{"type":"text","text":"PerimeterX protocol"}],"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterXDelegate","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PerimeterXDelegate"}],"url":"\/documentation\/perimeterx_sdk\/perimeterxdelegate"},"https://guides.cocoapods.org/":{"title":"Podfile","titleInlineContent":[{"type":"text","text":"Podfile"}],"type":"link","identifier":"https:\/\/guides.cocoapods.org\/","url":"https:\/\/guides.cocoapods.org\/"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/setUserId(userId:forAppId:)":{"role":"symbol","title":"setUserId(userId:forAppId:)","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"setUserId"},{"kind":"text","text":"("},{"kind":"externalParam","text":"userId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"forAppId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":"?)"}],"abstract":[{"type":"text","text":"Calling this method with non-null userId will start the Account Defender feature."}],"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/setUserId(userId:forAppId:)","kind":"symbol","type":"topic","url":"\/documentation\/perimeterx_sdk\/perimeterx\/setuserid(userid:forappid:)"},"https://github.com/PerimeterX/px-iOS-Framework":{"title":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework","titleInlineContent":[{"type":"text","text":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework"}],"type":"link","identifier":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework","url":"https:\/\/github.com\/PerimeterX\/px-iOS-Framework"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK":{"role":"collection","title":"PerimeterX_SDK","abstract":[{"type":"image","identifier":"PerimeterX.png"}],"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK","kind":"symbol","type":"topic","url":"\/documentation\/perimeterx_sdk"},"doc://com.perimeterx.mobile-sdk/documentation/PerimeterX_SDK/PerimeterX/start(appId:delegate:enableDoctorCheck:completion:)":{"role":"symbol","title":"start(appId:delegate:enableDoctorCheck:completion:)","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"start"},{"kind":"text","text":"("},{"kind":"externalParam","text":"appId"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"delegate"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"PerimeterXDelegate","preciseIdentifier":"c:@M@PerimeterX_SDK@objc(pl)PerimeterXDelegate"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"enableDoctorCheck"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"externalParam","text":"completion"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Error","preciseIdentifier":"s:s5ErrorP"},{"kind":"text","text":"?) -> ())"}],"abstract":[{"type":"text","text":"Start the PerimeterX SDK."}],"identifier":"doc:\/\/com.perimeterx.mobile-sdk\/documentation\/PerimeterX_SDK\/PerimeterX\/start(appId:delegate:enableDoctorCheck:completion:)","kind":"symbol","type":"topic","url":"\/documentation\/perimeterx_sdk\/perimeterx\/start(appid:delegate:enabledoctorcheck:completion:)"}}}